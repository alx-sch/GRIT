// Install REST Client by Huachao Mao in VSCode to send these off from here

// Check DB updates via prisma view 'make view-db'

@baseUrl = http://localhost:3000

# ========== HEALTH CHECK ==========
GET {{baseUrl}}
###

# ========== USER ONBOARDING ==========

POST {{baseUrl}}/users
Content-Type: application/json

{
	"name": "Thomas Test",
	"email": "tester_v99@grit.com",
	"password": "password123"
}
###

// ========== AUTHENTICATOION ========== //

# Get token of user 1
# @name debugGetToken
GET {{baseUrl}}/auth/debug/token/1
###

# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
	"email": "tester_v99@grit.com",
	"password": "password123"
}
###

# Capture the token from response automatically
@token = {{debugGetToken.response.body.accessToken}}
# @token = {{login.response.body.accessToken}}

# Verify/Rehydrate Current User
GET {{baseUrl}}/auth/me
Authorization: Bearer {{token}}
###

# ========== USER ACTIONS ==========

# Get all users
GET {{baseUrl}}/users/
###

# Get My Events (Attending)
GET {{baseUrl}}/users/me/events
Authorization: Bearer {{token}}
###

# User attends an event
PATCH {{baseUrl}}/users/attend
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"attending": 2
}
###

# ========== LOCATION ========== //

# Get all locations
GET {{baseUrl}}/locations
###

# Create new location
POST {{baseUrl}}/locations
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"authorId": 1,
	"name": "Secret Lair",
	"city": "Berlin",
	"country": "Germany",
	"longitude": 59.4748,
	"latitude": 11.4478,
	"isPublic": true
}
###

// Delete location
DELETE {{baseUrl}}/locations/3 HTTP/1.1
Authorization: Bearer {{token}}
###

// ========== EVENTS ========== //

# Get all published events
GET {{baseUrl}}/events
###

# Get event by event id
GET {{baseUrl}}/events/2
###

// Search for event by string
GET {{baseUrl}}/events?search=app
###

// Create event, use to whatever user the token resolves to
POST http://localhost:3000/events HTTP/1.1
Authorization: Bearer {{token}}
content-type: application/json

{
	"title": "Party at unkown's place!",
	"startAt": "2026-05-01T18:00:00Z",
	"endAt": "2026-05-02T02:00:00Z",
	"isPublic": true,
	"isPublished": true
}
###

# Update event (using ID 1)
PATCH http://localhost:3000/events/1 HTTP/1.1
Authorization: Bearer {{token}}
content-type: application/json

{
	"endAt": "2025-01-02T02:00:33Z",
	"locationId": 2
}
###

# Delete event (using ID 4)
DELETE http://localhost:3000/events/4 HTTP/1.1
Authorization: Bearer {{token}}
###
